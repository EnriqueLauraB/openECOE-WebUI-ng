<nz-content padding>
  <nz-page-header class="margin-top margin-bottom" (nzBack)="onBack()" nzBackIcon [nzTitle]="ecoe?.name" [nzSubtitle]="'ECOE' | translate"></nz-page-header>
  <nz-tabset
    nzSize="large"
    [nzTabPosition]="'top'"
    [(nzSelectedIndex)]="selectedIndexShift"
  >
    <nz-tab
      *ngFor="let shift of shiftDays"
      [nzTitle]="shift"
      (nzSelect)="onChangeShiftDay(shift)"
    >
      <div nz-row >
        <div nz-col nzSpan="3" nzXs="24" nzSm="6" nzLg="4" nzXl="3">
          <nz-tabset
            nzSize="default"
            [nzTabPosition]="'left'"
            [(nzSelectedIndex)]="selectedIndexRound">
            <nz-tab
              *ngFor="let round of rounds"
              [nzTitle]="round.description + ' - ' + round.roundCode">
            </nz-tab>
          </nz-tabset>
        </div>
        <div nz-col nzSpan="21" nzXs="24" nzSm="18" nzLg="20" nzXl="21">
          <div nz-row margin-top>
            <div nz-col>
              <ng-container *ngFor="let station of stations">
                <h2 [innerHTML]="station.order + ' - ' + station.name"></h2>
                <nz-list [nzDataSource]="filteredShifts" [nzRenderItem]="item" [nzGrid]="{ gutter: 24, xs: 24, sm: 12, md: 12, lg: 6, xl: 4 }">
                  <ng-template #item let-item>
                    <nz-list-item [nzContent]="nzContent">
                      <ng-template #nzContent>
                        <nz-card success-color no-padding pointer nzHoverable
                                 [ngClass]="(item['timeStart'] < momentRef()) ? 'completed' : 'not-completed'"
                                 *ngIf="station && shift && this.rounds[this.selectedIndexRound]"
                                 [routerLink]="['./station', station.id, 'shift', item.id, 'round', this.rounds[this.selectedIndexRound]?.id]"
                        >
                          <h3 text-center class="color-white bold">
                            {{item['shiftCode'] + ' - ' +  (item['timeStart'] | date:'H:mm')}}
                          </h3>
                          <h4 text-center  class="color-white">
                            {{momentRef(item['timeStart']).fromNow() | titlecase}}
                          </h4>
                        </nz-card>
                      </ng-template>
                    </nz-list-item>
                  </ng-template>
                </nz-list>
              </ng-container>

            </div>
          </div>

        </div>
      </div>

    </nz-tab>
  </nz-tabset>
</nz-content>
