<button *ngIf="!preview" nz-button nzType="dashed" nzBlock (click)="addQuestion()">
  <i nz-icon [type]="'plus-circle'"></i>
  {{'ADD_QUESTION' | translate}}
</button>
<nz-table #table
          [nzData]="questionsList"
          [(nzPageIndex)]="page"
          [(nzPageSize)]="perPage"
          (nzPageIndexChange)="pageChange($event)"
          (nzPageSizeChange)="pageSizeChange($event)"
          [nzLoading]="loading"
          [nzTotal]="totalItems"
          [nzFrontPagination]="false"
          nzSize="small"
          nzShowSizeChanger
          [nzShowPagination]="false"
          >
  <thead>
  <tr>
    <th nzWidth="40px">{{"ORDER" | translate}}</th>
    <th nzWidth="400px">{{"DESCRIPTION" | translate}}</th>
    <th nzWidth="150px">{{"REFERENCE" | translate}}</th>
    <th>{{"AREA" | translate}}</th>
    <th>{{"QUESTION_TYPE" | translate}}</th>
    <th nzAlign="right">
    </th>
  </tr>
  </thead>

  <tbody>
  <ng-template ngFor let-item let-index="index" [ngForOf]="table.data" >
    <tr>
      <td nzAlign="right">{{item.order || "-"}}</td>

      <td>{{item.description}}</td>

      <td>{{item.reference}}</td>

      <td>{{item.area?.name}}</td>

      <td>{{getQuestionTypeLabel(item.questionType) | translate}}</td>

      <td text-right>
        <nz-tag
          [nzColor]="item.options?.length === 0 ? 'red' : 'geekblue'"
          (click)="editCache[item.id].expand = !editCache[item.id].expand">
            <i nz-icon [type]="editCache[item.id]?.expand ? 'caret-down' : 'caret-right'"></i>
            {{item.options.length}} {{(item.options.length === 1 ? 'OPTION' : 'OPTIONS') | translate}}
        </nz-tag>
        <ng-container *ngIf="!preview">
          <nz-divider [nzType]="'vertical'"></nz-divider>
          <app-action-buttons
            [isEditing]="editCache[item.id]?.edit"
            [isNewItem]="editCache[item.id]?.new_item"
            (startEdit)="startEdit(item.id)"
            (delete)="deleteItem(item.id)"
            (save)="saveItem(editCache[item.id])"
            (cancelEdit)="cancelEdit(item.id)">
          </app-action-buttons>
        </ng-container>
      </td>
    </tr>
    <tr [nzExpand]="editCache[item.id]?.expand">
      <td></td>
      <td colspan="5">
        <app-options-list
          [question]="item"
          [preview]="preview">

        </app-options-list>
      </td>
    </tr>
  </ng-template>

  </tbody>
</nz-table>
