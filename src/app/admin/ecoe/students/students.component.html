<nz-content *ngIf="students">
  <nz-table #table
            [nzData]="students"
            [nzShowPagination]="false">
    <thead>
    <tr>
      <th [nzExpand]="true">
        <a (click)="loadStudents()">
          <i nz-icon icon-25 type="reload" [nz-tooltip] [nzPlacement]="'bottom'" [nzTitle]="'REFRESH' | translate"></i>
        </a>
      </th>
      <th nzWidth="150px">{{"DNI" | translate}}</th>
      <th>{{"SURNAMES" | translate}}</th>
      <th nzWidth="200px">{{"NAME" | translate}}</th>
      <th nzWidth="140px">
        <button nz-button [nzType]="'primary'" class="margin-left"
                [nz-tooltip] [nzTitle]="'ADD_STUDENT' | translate"
                (click)="addStudent()">
          <i nz-icon [type]="'plus-circle'" [theme]="'twotone'" icon-16></i>
        </button>
      </th>
    </tr>
    </thead>
    <tbody>
      <ng-template ngFor let-item [ngForOf]="table.data">
        <tr>
          <td [nzShowExpand]="false"></td>

          <td>
            <ng-container *ngIf="!editCache[item.id].edit">
              {{item.dni}}
            </ng-container>

            <ng-container *ngIf="editCache[item.id].edit">
              <input type="text" nz-input [nzSize]="'small'" style="width: 80%;" [(ngModel)]="editCache[item.id].dni">
            </ng-container>
          </td>

          <td>
            <ng-container *ngIf="!editCache[item.id].edit">
              {{item.surnames}}
            </ng-container>

            <ng-container *ngIf="editCache[item.id].edit">
              <input type="text" nz-input [nzSize]="'small'" [(ngModel)]="editCache[item.id].surnames">
            </ng-container>
          </td>

          <td>
            <ng-container *ngIf="!editCache[item.id].edit">
              {{item.name}}
            </ng-container>

            <ng-container *ngIf="editCache[item.id].edit">
              <input type="text" nz-input [nzSize]="'small'" [(ngModel)]="editCache[item.id].name">
            </ng-container>
          </td>

          <td text-right>
            <app-action-buttons [isEditing]="editCache[item.id].edit"
                                [isNewItem]="editCache[item.id].new_item"
                                (startEdit)="startEdit(item.id)"
                                (delete)="deleteItem(item)"
                                (save)="saveItem(item, editCache[item.id].new_item)"
                                (cancelEdit)="cancelEdit(item)">
            </app-action-buttons>
          </td>
        </tr>
      </ng-template>
    </tbody>
  </nz-table>
</nz-content>
